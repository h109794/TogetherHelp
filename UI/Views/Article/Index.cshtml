@model List<SRV.ViewModel.ArticleModel>
@{
    Layout = "~/Views/Shared/Layout/_ContentLayout.cshtml";
    ViewBag.Title = "文章列表 - 一起帮";

    string showPreviousPage;
    string showNextPage;
    string paginationClass;

    int pageBeginNumber = (ViewBag.PageIndex - 1) / 10 * 10;
    int pageNumber = (pageBeginNumber + 10 > ViewBag.PageCount) ? ViewBag.PageCount : pageBeginNumber + 10;
}

@foreach (var article in Model)
{
    <div>
        <div>
            <small style="color:#777"><i class="fa fa-calendar" aria-hidden="true"></i>&nbsp;@(article.PublishTime)</small>
            <span style="float:right; font-size:14px">作者：<a href="#">@(article.Author.Username)</a></span>
        </div>
        <p style="margin-top:10px; font-size:18px"><a href="~/Article/Single/@article.Id" target="_blank">@(article.Title)</a></p>
        <p style="font-size:14px">@article.Abstract<a href="~/Article/Single/@article.Id" target="_blank">……</a></p>
        <div style="margin-top:10px">
            <i class="fa fa-tags" aria-hidden="true"></i>&nbsp;<b style="font-size:14px">关键字：</b>
            @foreach (var keyword in article.Keywords)
            {
                <span class="keyword">
                    @keyword.Text
                </span>
            }
        </div>
        <div style="text-align:right; font-size:14px">
            <a href="~/Article/Single/@article.Id#comment-area" target="_blank"><i class="fa fa-comments-o" aria-hidden="true"></i>&nbsp;评论：@(article.Comments.Count)</a>
            <a href="#" style="margin-left:1rem; color:#2b542c"><i class="fa fa-thumbs-o-up" aria-hidden="true"></i>&nbsp;赞：@(article.Agree)</a>
            <a href="#" style="margin-left:1rem; color:#777"><i class="fa fa-thumbs-o-down" aria-hidden="true"></i>&nbsp;踩：@(article.DisAgree)</a>
        </div>
        <hr />
    </div>
}

<nav aria-label="Page navigation example" style="margin-top:50px">
    <ul class="pagination">
        @{showPreviousPage = (ViewBag.PageIndex == 1) ? "none" : "";}
        <li class="page-item" style="display:@(showPreviousPage)">
            <a class="page-link" href="~/Article/Page/@(ViewBag.PageIndex - 1)" aria-label="Previous">
                <span aria-hidden="true"><i class="fa fa-angle-double-left" aria-hidden="true"></i></span>
            </a>
        </li>

        @for (int i = pageBeginNumber; i < pageNumber; i++)
        {
            paginationClass = ((i + 1) == ViewBag.PageIndex) ? "page-item active" : "page-item";
            <li class="@paginationClass"><a class="page-link" href="~/Article/Page/@(i + 1)">@(i + 1)</a></li>
        }

        @{showNextPage = (ViewBag.PageIndex == ViewBag.PageCount) ? "none" : "";}
        <li class="page-item" style="display:@(showNextPage)">
            <a class="page-link" href="~/Article/Page/@(ViewBag.PageIndex + 1)" aria-label="Next">
                <span aria-hidden="true"><i class="fa fa-angle-double-right" aria-hidden="true"></i></span>
            </a>
        </li>
    </ul>
</nav>

@section Keywords{
    @Html.Partial("_SidebarKeywords")
}
