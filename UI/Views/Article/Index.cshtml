@model List<SRV.ViewModel.ArticleModel>
@{
    Layout = "~/Views/Shared/Layout/_ContentLayout.cshtml";
    ViewBag.Title = "文章列表 - 一起帮";

    string showPreviousPage;
    string showNextPage;
    string paginationClass;

    int pageBeginNumber = (ViewBag.PageIndex - 1) / 10 * 10;
    int pageNumber = (pageBeginNumber + 10 > ViewBag.PageCount) ? ViewBag.PageCount : pageBeginNumber + 10;
}

@foreach (var article in Model)
{
    <div>
        <div>
            <small class="clr-777"><i class="fa fa-calendar" aria-hidden="true"></i> @(article.PublishTime)</small>
            <span class="float-right fs-14">作者：<a href="#">@(article.AuthorName)</a></span>
        </div>
        <p class="mt-2 fs-18"><a href="~/article/single/@article.Id" target="_blank">@(article.Title)</a></p>
        <p class="fs-14">@article.Abstract<a href="~/article/single/@article.Id" target="_blank">……</a></p>
        <div class="mt-2">
            <i class="fa fa-tags" aria-hidden="true"></i><b class="fs-14"> 关键字：</b>
            @foreach (var keyword in article.Keywords)
            {
                <span class="keyword">
                    @keyword.Text
                </span>
            }
        </div>
        <div class="text-right fs-14">
            <a href="~/article/single/@article.Id#comment-area" target="_blank"><i class="fa fa-comments-o" aria-hidden="true"></i> 评论：@(article.Comments.Count)</a>
            <a href="#" class="ml-3 clr-2b542c"><i class="fa fa-thumbs-o-up" aria-hidden="true"></i> 赞：@(article.Agree)</a>
            <a href="#" class="ml-3 clr-777"><i class="fa fa-thumbs-o-down" aria-hidden="true"></i> 踩：@(article.DisAgree)</a>
        </div>
        <hr />
    </div>
}

<nav aria-label="Page navigation example" class="mt-5">
    <ul class="pagination">
        @{showPreviousPage = (ViewBag.PageIndex == 1) ? "d-none" : "";}
        <li class="page-item @showPreviousPage">
            <a class="page-link" href="~/article/page/@(ViewBag.PageIndex - 1)" aria-label="Previous">
                <span aria-hidden="true"><i class="fa fa-angle-double-left" aria-hidden="true"></i></span>
            </a>
        </li>

        @for (int i = pageBeginNumber; i < pageNumber; i++)
        {
            paginationClass = ((i + 1) == ViewBag.PageIndex) ? "page-item active" : "page-item";
            <li class="@paginationClass"><a class="page-link" href="~/article/page/@(i + 1)">@(i + 1)</a></li>
        }

        @{showNextPage = (ViewBag.PageIndex == ViewBag.PageCount) ? "d-none" : "";}
        <li class="page-item @showNextPage">
            <a class="page-link" href="~/article/page/@(ViewBag.PageIndex + 1)" aria-label="Next">
                <span aria-hidden="true"><i class="fa fa-angle-double-right" aria-hidden="true"></i></span>
            </a>
        </li>
    </ul>
</nav>

@section Keywords{
    @Html.Partial("_SidebarKeywords")
}
